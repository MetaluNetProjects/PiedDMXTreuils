#N canvas 2 21 1084 737 10;
#X declare -path fwTreuil/modules;
#X obj 37 70 tgl 15 0 treuil\$1-connected treuil\$1-connected connecté 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 371 151 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 37 87 tgl 15 0 treuil\$1-lowswitch treuil\$1-lowswitch au_départ 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X msg 388 668 dest \$1;
#X obj 371 128 route present;
#X obj 271 379 route 10;
#X obj 166 61 nbx 6 14 -1e+37 1e+37 0 0 treuil\$1-pos treuil\$1-pos position 0 -6 0 10 #fcfcfc #000000 #000000 0 256;
#X msg 160 642 WRITE;
#X text 158 628 eeprom;
#X obj 166 89 nbx 5 14 -1e+37 1e+37 0 0 treuil\$1-dest treuil\$1-dest destination 0 -6 0 10 #fcfcfc #000000 #000000 0 256;
#X msg 31 615 c 120 c 4 i \$1;
#X floatatom 31 591 5 0 0 0 - - - 0;
#X obj 556 149 nbx 5 14 -1e+37 1e+37 0 0 treuil\$1-ramppos treuil\$1-ramppos ramp_position 0 -6 0 10 #fcfcfc #000000 #000000 0 256;
#X obj 109 77 nbx 5 14 -1e+37 1e+37 0 0 treuil\$1-pwm treuil\$1-pwm PWM 0 -6 0 10 #fcfcfc #000000 #000000 0 256;
#X obj 35 565 hsl 128 15 -1023 1023 0 0 empty empty empty -2 -8 0 10 #fcfcfc #000000 #000000 0 1;
#X msg 34 541 0;
#X obj 480 138 print;
#X msg 432 379 set -1;
#X obj 241 516 == 0;
#X obj 340 678 print;
#X obj 238 61 bng 15 250 50 0 treuil\$1-rewind treuil\$1-rewind rewind -5 -5 0 10 #f8fc00 #000000 #000000;
#X obj 238 88 bng 15 250 50 0 treuil\$1-stop treuil\$1-stop stop -5 -5 0 10 #fc0400 #000000 #000000;
#X obj 544 651 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X floatatom 206 478 5 0 0 0 - - - 0;
#X msg 112 720 L\$1;
#X obj 103 698 tgl 16 0 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 29 142 fruit/fruit 1 treuil\$1 \$2 fwTreuil;
#X obj 371 107 fruit/receive treuil\$1;
#X obj 27 202 dcmotor/motor treuil\$1 120 motor;
#X obj 28 425 s treuil\$1-motor-posPid-params;
#X obj 28 381 s treuil\$1-motor-ramp-params;
#X obj 371 171 s treuil\$1-connected;
#X obj 271 358 fruit/receive treuil\$1;
#X obj 432 357 r treuil\$1-connected;
#X obj 388 646 r treuil\$1-dest;
#X obj 31 665 fruit/send2 treuil\$1;
#X obj 68 541 r treuil\$1-setpwm;
#X obj 618 63 sel 1;
#X msg 683 110 0 \, 1;
#X msg 683 131 homed \$1;
#X msg 637 121 0;
#X obj 648 226 route \$1 -1;
#X obj 648 253 b;
#X msg 651 361 -1023;
#X obj 761 224 route \$1 -1;
#X obj 761 251 b;
#X msg 761 360 0;
#X msg 602 274 1;
#X obj 802 372 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 618 20 r treuil\$1-lowswitch;
#X obj 683 153 s treuil\$1-motor-params;
#X obj 637 173 s treuil\$1-dest;
#X obj 628 194 r TREUIL_REWIND;
#X obj 648 275 s treuil\$1-rewind;
#X obj 761 275 s treuil\$1-stop;
#X obj 750 194 r TREUIL_STOP;
#X obj 651 339 r treuil\$1-rewind;
#X obj 761 339 r treuil\$1-stop;
#X obj 651 382 s treuil\$1-setpwm;
#X obj 388 690 s treuil\$1-motor-ramp-params;
#X text 352 43 1 tour = 800 pas;
#X obj 618 41 change;
#X text 42 20 treuil NUM_TREUIL ID_FRUIT;
#X obj 186 559 r \$0-hwreset;
#X obj 531 101 s \$0-hwreset;
#X obj 618 84 t b b b;
#X msg 185 587 c 120 c 6 c \$1;
#X msg 531 78 1;
#X msg 497 56 0;
#X msg 18 453 speed 9000 \, accel 32000 \, decel 32000;
#X msg 802 402 666;
#X floatatom 802 423 5 0 0 0 - - - 0;
#X obj 784 57 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X msg 784 87 666;
#X floatatom 784 108 5 0 0 0 - - - 0;
#X msg 590 360 1023;
#X msg 12 505 gainP 30 \, gainI 1 \, gainD 0 \, max 1023;
#X obj 422 14 declare -path fwTreuil/modules;
#X msg 28 403 gainP 4 \, gainI 1 \, gainD 0 \, max 1023;
#X msg 28 358 speed 850 \, accel 500 \, decel 500;
#X obj 288 432 unpack f f f f f f, f 51;
#X obj 288 408 fruit/decode int32 int8 int8 int16 int32 int8;
#X floatatom 288 454 9 0 0 0 - - - 0;
#X floatatom 348 454 5 0 0 0 - - - 0;
#X floatatom 410 453 5 0 0 0 - - - 0;
#X floatatom 462 456 5 0 0 0 - - - 0;
#X floatatom 510 453 12 0 0 0 - - - 0;
#X floatatom 591 456 5 0 0 0 - - - 0;
#X obj 571 488 s treuil\$1-ramppos;
#X obj 470 488 s treuil\$1-pwm;
#X obj 396 529 s treuil\$1-highswitch;
#X obj 333 549 s treuil\$1-lowswitch;
#X obj 284 569 s treuil\$1-pos;
#X obj 333 504 change -1;
#X obj 396 487 change -1;
#X obj 284 499 / 16;
#X obj 222 624 r \$0-setpos;
#X msg 222 652 c 120 c 7 l \$1;
#X obj 841 543 s \$0-setpos;
#X msg 842 503 4000;
#X msg 888 502 4200;
#X msg 934 501 200;
#X msg 971 501 10000;
#X connect 1 0 31 0;
#X connect 3 0 22 0;
#X connect 3 0 59 0;
#X connect 4 0 1 0;
#X connect 5 0 81 0;
#X connect 7 0 35 1;
#X connect 10 0 35 0;
#X connect 11 0 10 0;
#X connect 14 0 11 0;
#X connect 15 0 14 0;
#X connect 17 0 93 0;
#X connect 17 0 94 0;
#X connect 24 0 35 1;
#X connect 25 0 24 0;
#X connect 27 0 4 0;
#X connect 32 0 5 0;
#X connect 33 0 17 0;
#X connect 34 0 3 0;
#X connect 36 0 14 0;
#X connect 37 0 65 0;
#X connect 38 0 39 0;
#X connect 39 0 50 0;
#X connect 40 0 51 0;
#X connect 41 0 42 0;
#X connect 41 1 42 0;
#X connect 42 0 53 0;
#X connect 43 0 58 0;
#X connect 44 0 45 0;
#X connect 44 1 45 0;
#X connect 45 0 54 0;
#X connect 46 0 58 0;
#X connect 48 0 70 0;
#X connect 52 0 47 0;
#X connect 52 0 42 0;
#X connect 55 0 45 0;
#X connect 56 0 43 0;
#X connect 57 0 46 0;
#X connect 57 0 48 0;
#X connect 61 0 37 0;
#X connect 63 0 66 0;
#X connect 65 0 67 0;
#X connect 65 1 40 0;
#X connect 65 2 38 0;
#X connect 65 2 72 0;
#X connect 66 0 35 0;
#X connect 67 0 64 0;
#X connect 68 0 64 0;
#X connect 70 0 71 0;
#X connect 72 0 73 0;
#X connect 73 0 74 0;
#X connect 75 0 58 0;
#X connect 78 0 29 0;
#X connect 79 0 30 0;
#X connect 80 0 82 0;
#X connect 80 0 95 0;
#X connect 80 1 83 0;
#X connect 80 1 93 0;
#X connect 80 2 84 0;
#X connect 80 2 94 0;
#X connect 80 3 85 0;
#X connect 80 3 89 0;
#X connect 80 4 86 0;
#X connect 80 4 88 0;
#X connect 80 5 87 0;
#X connect 81 0 80 0;
#X connect 93 0 91 0;
#X connect 94 0 90 0;
#X connect 95 0 92 0;
#X connect 96 0 97 0;
#X connect 97 0 35 0;
#X connect 99 0 98 0;
#X connect 100 0 98 0;
#X connect 101 0 98 0;
#X connect 102 0 98 0;
#X coords 0 -1 1 1 240 60 1 30 45;
